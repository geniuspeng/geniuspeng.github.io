<!DOCTYPE html><html class="fixed-top" lang="zh-cn"><head><link rel=manifest href=/manifest.json><meta charset="UTF-8"><meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="apple-mobile-web-app-title" content="Blog PWA"><link rel="apple-touch-icon" href="images/icons/icon-152x152.png"><meta name="msapplication-TileImage" content="images/icons/icon-144x144.png"><meta name="msapplication-TileColor" content="#2F3BA2"><title>初探nodebb [ 牧羊少年的个人博客 ]</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/css/media.css"><link rel="icon" href="/favicon.ico"></head><body><div id="menu-outer"><dev class="bd-special-shadow" id="specialShadow" style="transform: scaleY(1);"></dev><nav class="container" id="menu-inner"><div class="navbar-brand"><a class="navbar-item" href="#"><img src="/images/avatar.png" alt="头像"><span>牧羊少年</span></a><div class="navbar-burger" id="navbarBurger"><span></span><span></span><span></span></div></div><div class="navbar-menu" id="navMenuIndex"><div class="navbar-start"><div class="navbar-item"><a class="navbar-link" href="/">首页</a></div><div class="navbar-item"><a class="navbar-link active" href="/archives">归档</a></div><div class="navbar-item"><a class="navbar-link" href="/about">关于</a></div></div></div></nav></div><div id="content-outer"><div class="content" id="content-inner"><div class="post-wrap"><article class="post" id="post"><div class="post-header"><h1 class="post-title">初探nodebb</h1></div><div class="post-meta"><div class="tags"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a></li></ul></div><time datetime="2015-06-17T14:07:16.000Z">2015-06-17</time></div><section class="post-content"><p>偶然发现了NodeBB这个东东~~~不得不承认，就目前的形势来看，node已经可以在后台独当一面了，至少我是这么认为的。。。CNode社区就足以证明这一点。这个NodeBB也是个社区搭建框架，而且看起来灰常强大，而卧搭建好之后事实证明确实如此。<br>废话不多说，这里我把搭建过程和其中遇到的问题都记录一下…说不定以后会用得上。</p>
<a id="more"></a>
<p>好吧，首先必须承认，最开始我是打算在Windows系统上去弄这货，但是遇到各种各样奇葩的问题，后来去NodeBB的论坛上，好多人也都反应最新版本的nodebb在windows上并不是能很好的搭建，于是乎转战Ubuntu了。</p>
<h3 id="安装必备软件包"><a href="#安装必备软件包" class="headerlink" title="安装必备软件包"></a>安装必备软件包</h3><p>当然，系统必须有一些必备的软件包，首先还是必须要有git，然后安装一些nodebb所需的基本包：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install git nodejs nodejs-legacy npm redis-server imagemagick build-essential</span><br></pre></td></tr></table></figure>
<h3 id="安装nodejs"><a href="#安装nodejs" class="headerlink" title="安装nodejs"></a>安装nodejs</h3><p>接下来，如果没有装node的话，需要安装一个合适版本的node，这里不一定是安装最新版本，而是一个合适的稳定版本,可以使用 <code>node –version</code> 来查看当前node版本，如果想要安装node.js v0.11 使用这个ppa:chris-lea/node.js-devel即可：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo add-apt-repository ppa:chris-lea/node.js</span><br><span class="line">$ sudo apt-get update &amp;&amp; sudo apt-get dist-upgrade</span><br></pre></td></tr></table></figure>
<h3 id="安装mongoDB"><a href="#安装mongoDB" class="headerlink" title="安装mongoDB"></a>安装mongoDB</h3><p>然后，这个社区目前使用的数据库是redis或者是mongoDB，就我个人而言，对于mongoDB更熟悉一些，所以我是基于mongoDB搭建的,那么首先必须在系统中安装mongoDB：<br>这里上个链接吧:<a href="http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/" target="_blank" rel="noopener">ubuntu下安装mongoDB</a></p>
<h3 id="克隆nodebb到本地"><a href="#克隆nodebb到本地" class="headerlink" title="克隆nodebb到本地"></a>克隆nodebb到本地</h3><p>安装好数据库之后，就可以从github上把nodebb的源码clone到本地了（nodebb目前还在完善之中，我是用的这个版本，可以根据需要选择clone哪个版本，如果不加需求就是clone最新版本了）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> -b v0.7.x https://github.com/NodeBB/NodeBB.git nodebb</span><br></pre></td></tr></table></figure>
<h3 id="安装nodebb依赖模块"><a href="#安装nodebb依赖模块" class="headerlink" title="安装nodebb依赖模块"></a>安装nodebb依赖模块</h3><p>然后进入到目标文件夹，安装nodebb的依赖模块：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> nodebb</span><br><span class="line">$ npm install --production</span><br></pre></td></tr></table></figure>
<p>在这里，最开始我是遇到了一些问题，就是node-gyp rebuild的过程巨慢无比，老是在这里卡住：<a href="http://www.bubuko.com/infodetail-827600.html" target="_blank" rel="noopener">我是解决方法链接</a></p>
<h3 id="为用户建立数据库"><a href="#为用户建立数据库" class="headerlink" title="为用户建立数据库"></a>为用户建立数据库</h3><p>之后需要新建一个mongoDB数据库，来存储用户数据：<br>首先进入mongo命令行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mongo</span><br></pre></td></tr></table></figure>
<p>创建一个名字为nodebb的数据库（如果没有名为nodebb数据库，use命令会自动创建该数据库并切换到该数据库）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; use nodebb</span><br></pre></td></tr></table></figure>
<p>对于mongoDB2.6.X版本（nodebb对于mongoDB的版本为2.6.0以上，密码自定）：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.createUser( &#123; user: <span class="string">"nodebb"</span>, <span class="built_in">pwd</span>: <span class="string">"&lt;Enter in a secure password&gt;"</span>, roles: [ <span class="string">"readWrite"</span> ] &#125; )</span><br></pre></td></tr></table></figure></p>
<p>这样就在名为nodebb的数据库中建立了一个名字为nodebb的用户，具有读写权限。<br>接下来为了使其权限可用，需要对mongoDB进行一下小小的配置：找到/etc/mongod.conf文件，里面有一个“#auth = true”的注释，将注释“#”去掉（具体方法可以用gedit命令或者nano等），然后重启mongoDB:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># service mongod restart</span></span><br></pre></td></tr></table></figure>
<p>###配置nodebb<br>进入nodebb目录对其进行配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /path/to/nodebb</span><br><span class="line">$ node app --setup</span><br></pre></td></tr></table></figure>
<p>setup会让你输入一系列的东东- -一般来说，默认就好，如果你想用别的也可以改成自己的：<br>-首先是hostname和端口，我是默认了，可以按照自己的想法修改；<br>-然后是数据库，我选择mongo；<br>-将你的username改成nodebb，因为上面建立的那个nodebb的用户，或者在上面设置一个其他的名字，这里就填那个；<br>-将之前步骤的密码填到密码这里；<br>-数据库的名字改为nodebb（默认好像是0），或者是上文自己定义的数据库名字<br>-就酱！然后就可以start了:</p>
<p>###Running<br>开始：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./nodebb start</span><br></pre></td></tr></table></figure></p>
<p>停止：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./nodebb stop</span><br></pre></td></tr></table></figure></p>
<p>也可以npm start或者npm stop来实现。也可以用node app来跑，或者更高端一些的supervisor，grunt神马的：<a href="https://docs.nodebb.org/en/latest/running/index.html" target="_blank" rel="noopener">Running NodeBB</a></p>
<p>差不多这样就完成了，这货可以说是相当强大的一个东西了感觉，虽然还在完善之中。几乎实现了完整的后台设置页面，管理员可对论坛进行全方面管理。，像hexo一样，你可以根据自己的喜好去设计主题和皮肤。。。先写这么多吧- -</p>
</section></article></div></div></div><div id="bottom-outer"><div id="bottom-inner"><span>Site construction by</span><span> 牧羊少年 </span><span>using</span><a href="http://hexo.io"><span>hexo blog framework</span></a><span>.</span></div></div><script>window.is_home = false</script><script src="/js/resLoader.js"></script><script src="/js/main.js"></script><script>if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js?t=1514522006084')
    .then(function () {console.log('ServiceWorker Register Successfully.')})
    .catch(function (e) {console.error(e)});
}
</script></body></html>